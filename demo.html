<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Email Subscription Form</title>
</head>
<body>

<form id="subscription-form" >
 
   
      <div class="mail-chimp-button">
        <label for="email">Email Address:</label>
        <input type="email" id="email" name="email" placeholder="Email Address" required>
        <button type="submit"><i class="fa fa-paper-plane"></i> Subscribe</button>
      </div>
   
 
</form>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    document.getElementById('subscription-form').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent the default form submission

        const email = document.getElementById('email').value;

        // Send the email to the server using Fetch API
        fetch('http://localhost:8080/auth/save-subscribe', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ email: email })
        })
        .then(response => response.json())
        .then(data => {
            // Display success message using SweetAlert
            Swal.fire({
                icon: 'success',
                title: 'Subscribed!',
                text: 'You have successfully subscribed to our mailing list.',
            });
            // Clear the form
            document.getElementById('subscription-form').reset();
        })
        .catch(error => {
            // Display error message using SweetAlert
            Swal.fire({
                icon: 'error',
                title: 'Oops...',
                text: 'Something went wrong! Please try again later.',
            });
            console.error('Error:', error);
        });
    });
</script>

</body>
</html>
